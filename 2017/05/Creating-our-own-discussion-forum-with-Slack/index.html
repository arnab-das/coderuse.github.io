<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@coderuse"><meta name="twitter:title" content="Creating our own discussion forum with Slack"><meta name="twitter:description" content="This is a small DIY to automate sending invitation for your Slack team. With Slack team, you can create create your own forum and invite people to join and discuss about interesting stuff. This makes use of the Slackin project. I've included Google recaptcha to prevent spam registrations. And the deployment has been done on Openshift."><meta name="twitter:image" content="http://i.imgur.com/9RX3TO3.png"><title>Creating our own discussion forum with Slack | CodeRuse</title><link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans:300|Roboto:300|Inconsolata"><link rel="stylesheet" type="text/css" href="/css/very-simple.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><!-- include the sidebar--><!-- include ./includes/sidebar.jade--><!-- Blog title and subtitle--><header><div class="container header"><a id="logo" href="/." class="title">CodeRuse</a><!--span.subtitle= config.subtitle--><label id="toggle-menu" for="menu" onclick><i class="fa fa-bars"></i></label></div></header><!-- use checkbox hack for toggle nav-bar on small screens--><input id="menu" type="checkbox"><!-- Navigation Links--><div id="top-nav" class="nav"><div class="container"><a href="/" class="sidebar-nav-item active">Home</a><a href="/archives" target="_blank" class="sidebar-nav-item">Archives</a><a href="http://galleries.coderuse.com" target="_blank" class="sidebar-nav-item">Galleries</a><a href="/about" target="_blank" class="sidebar-nav-item">About</a></div></div><div id="header-margin-bar"></div><!-- gallery that comes before the header--><div class="wrapper"><div class="container post-header"><h1>Creating our own discussion forum with Slack</h1></div></div><div class="wrapper"><div class="container meta"><div class="post-time">May 17, 2017</div><div class="post-categories"><a class="post-category-link" href="/categories/Slack/">Slack</a>><a class="post-category-link" href="/categories/Slack/Cookbook/">Cookbook</a>><a class="post-category-link" href="/categories/Slack/Cookbook/Forum/">Forum</a>><a class="post-category-link" href="/categories/Slack/Cookbook/Forum/Technical/">Technical</a></div><div class="post-tags"><a class="post-tag-link" href="/tags/forum/">forum</a>/<a class="post-tag-link" href="/tags/free/">free</a>/<a class="post-tag-link" href="/tags/slack/">slack</a>/<a class="post-tag-link" href="/tags/team-conversation/">team-conversation</a></div></div></div><article><div class="container post"><p>Recently I’ve created one <a href="https://coderuse.slack.com/" target="_blank" rel="external">team</a> in <a href="https://slack.com/" target="_blank" rel="external">Slack</a>. It’s basically an effort to communicate with all, who wants to communicate with me. In one way it’s an <a href="https://github.com/sindresorhus/ama" target="_blank" rel="external">AMA</a> from me. I don’t know if someone wants to contact with me or not. But at-least I should keep some channels open to connect.</p>
<p>I really appreciate this AMA initiative by <a href="https://sindresorhus.com/" target="_blank" rel="external">Sindre Sorhus</a>. And I think that everyone should keep open some channel to contact. Not email. Because email lacks the visibility for everyone. Email is good for one-to-one communication. But forum conversations are generally meant for publicly visible. Conversations as GitHub’s issue-comment presentation is a overkill, if not a little awkward. So, I was searching for an alternative to start my AMA. I like the UI of the currently popular traditional forum softwares, like <a href="https://www.vbulletin.com/" target="_blank" rel="external">vBulletin</a>, <a href="https://www.phpbb.com/" target="_blank" rel="external">phpBB</a> and <a href="https://www.google.com/search?q=forum+softwares" target="_blank" rel="external">many others</a>. But main problem with them is, I’ve to host them personally and hosting a public facing forum needs a lot of time and experience, which I don’t have. There are also some choices for free forum hosting. But, they gives annoying ads all over the pages and have some irrational constraints like limit on users (how can, or why should I put restrictions on user registrations, after all it’s purpose is to communicate with all. I’m not saying my forum is going to be that big. But at-least I should have no such limitations.), limit on posts (this is another disturbing limitation) etc.</p>
<p>Slack has become popular for quite some time. And I really like the UI and it’s made for conversation. But one problem with the Slack teams, is joining of new members is depended upon invitation. It’s a little obstacle. Though this can be overcome if we can automate the sending of invitations. And fortunately there are some opensource projects, already solved the problem. One of the projects of this sort is <a href="https://github.com/rauchg/slackin" target="_blank" rel="external">Slackin</a>.</p>
<p>Slackin is a really simple web app with NodeJs backend. It’s simple to host and modify. But it needs one backend. Can’t be hosted with GitHub pages. There are a few free options like heroku, openshift to host a NodeJs application. Heroku does not accept custom domains with free plan. So, my obvious choice is always <a href="https://www.openshift.com/" target="_blank" rel="external">Openshift</a> in such cases. Openshift’s previous version was more generous towards the free plan. There was no mandatory sleep time, like with the new version (Openshift’s version 3 requires at-least 18 hours of sleep time in a contiguous span of 72 hours). I’ve an account with the previous version. So, I could configure Slackin with one <a href="https://developers.openshift.com/overview/basic-terminology.html" target="_blank" rel="external">gear</a> (in-simple-words <em>containers</em> are termed as <em>gear</em> in Openshift’s terminogy).</p>
<p>I’ve modified Slackin a little. In original software there is no check for spam. Though it does not matter if invitations are generated with automated scripts, as all the requests will be submitted to Slack. But, it’s better to have means to prevent spams in all publicly accessible websites. I have also checked that, Slack server is not testing the requested emails for invitation. Invitation requests to Slack’s API with email adddresses like, <code>a@b.c</code> is returning success. So, it’s needed to employ a captcha at-least to prevent spams upto some level.</p>
<p>I’ve used Google <a href="https://www.google.com/recaptcha/intro/" target="_blank" rel="external">Recaptcha</a>. It’s simple to integrate to websites and innovative. Really. You should try this. If havn’t already.</p>
<p>Slackin’s <a href="https://github.com/rauchg/slackin/wiki/OpenShift" target="_blank" rel="external">guide</a> to host with Openshift didn’t work for me. So, I modified the Slackin code to incorporate recaptcha and used different template to deploy the app to Openshift.</p>
<p>Let’s dive into the details of deploying Slackin with Openshift. I’m writing this conforming to my modifications of the original app. But this guide should work with the original app and different enviroment than Openshift also.</p>
<p>First let’s create one recaptcha token for our site. Go to <a href="https://www.google.com/recaptcha/intro/" target="_blank" rel="external">Recaptcha site</a>. Click on “<em>Get Recaptcha</em>“ and login with the desired Google login. Register a new site to the bottom of the page. Choose “Recaptcha V2”. Give the domain or subdomain name. By giving the domain name, all the subdomains to that domain are also authorised to use the same token. We’ve to use this feature wisely. And we’ve to include <code>localhost</code>, to test the recaptcha during development.</p>
<p>Next, we’ve to create one Slack team, where we will invite everyone to join. And create API token to authorize our app to Slack servers. So, head over to <a href="https://slack.com" target="_blank" rel="external">Slack website</a> and click on <code>Create Team</code>.</p>
<p>Once the procedure of creating team and validation of email is complete, login to the Slack account and head over to create new token <a href="https://api.slack.com/custom-integrations/legacy-tokens" target="_blank" rel="external">here</a>.</p>
<p>So, the tokens we’ll use, Slack team calls legacy token, as they have introduced OAUTH app style authorization with <code>client secret</code> and <code>client id</code>. <em>Legacy Token</em> is fine. There are nothing wrong with it. Let’s work with it for now. Later I’ll try to modify this app to work with the new authorization.</p>
<p>Now, let’s clone the <a href="https://github.com/arnabdas/slackin" target="_blank" rel="external">repo</a> in your workstation. And install NPM packages and run the application to test.</p>
<p>If NodeJs is not installed in the workstation it can be downloaded from <a href="https://nodejs.org/en/download/" target="_blank" rel="external">here</a> and installed.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/arnabdas/slackin.git</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> slackin</span><br><span class="line"></span><br><span class="line"><span class="comment"># install npm packages</span></span><br><span class="line">npm install</span><br><span class="line"></span><br><span class="line"><span class="comment"># see the options can be passed to the application</span></span><br><span class="line">npm ./bin/slackin -h</span><br><span class="line"></span><br><span class="line"><span class="comment"># now run the application</span></span><br><span class="line">node ./bin/slackin -k &lt;recaptcha-site-key&gt; -r &lt;recaptcha-secret&gt; -o &lt;slack-team-name&gt; -t &lt;slack-legacy-token&gt;</span><br></pre></td></tr></table></figure>
<p>Test whether the recaptcha widget is loaded properly, once the captcha is confirmed and invitation is requested with valid email id, invitation link is received by the provided email id or not. Once it’s configured properly, it’s time to deploy the application to Openshift.</p>
<p>For Openshift install <code>rhc</code> by following <a href="https://developers.openshift.com/managing-your-applications/client-tools.html" target="_blank" rel="external">this</a>. Invoke <code>rhc setup</code> to login to Openshift from console and configure the workstation to work with Openshift API.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># create slacin application in Openshift cloud</span></span><br><span class="line">rhc app-create slackin https://raw.githubusercontent.com/arnabdas/openshift-cartridge-nodejs/master/metadata/manifest.yml</span><br><span class="line"></span><br><span class="line"><span class="comment"># $RECAPTCHA_SITE_KEY -&gt; Google recaptcha site key</span></span><br><span class="line"><span class="comment"># $RECAPTCHA_SECRET -&gt; Google recaptcha secret</span></span><br><span class="line"><span class="comment"># $SLACK_SUBDOMAIN -&gt; Slack team</span></span><br><span class="line"><span class="comment"># $SLACK_API_TOKEN -&gt; Slack legacy token</span></span><br><span class="line">rhc env-set <span class="operator">-a</span> slackin RECAPTCHA_SITE_KEY=<span class="string">"recaptcha-site-key"</span> RECAPTCHA_SECRET=<span class="string">"recaptcha-secret"</span> SLACK_SUBDOMAIN=<span class="string">"slack-team-name"</span> SLACK_API_TOKEN=<span class="string">"slack-legacy-token"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># if custom domain to be configured for the app</span></span><br><span class="line"><span class="comment"># create one CNAME record for this custom domain to the Openshift app url</span></span><br><span class="line">rhc <span class="built_in">alias</span>-add &lt;custom-domain&gt; <span class="operator">-a</span> slackin</span><br><span class="line"></span><br><span class="line"><span class="comment"># add Openshift remote to the git repo to checkin the code to the Openshift repo</span></span><br><span class="line">git remote add openshift `rhc app-show slackin | grep Git | sed <span class="string">'s/^.*ssh/ssh/'</span>`</span><br><span class="line"></span><br><span class="line"><span class="comment"># now push to Openshift</span></span><br><span class="line">git push openshift master</span><br></pre></td></tr></table></figure>
<p>It should go fine and the app should be available at the intended url. And we’ve got our own forum. Cheers. Happy coding. :)</p>
</div><!-- comment system--><div class="container"><div id="disqus_thread"></div><script type="text/javascript">
var disqus_shortname = 'coderuse';
var disqus_identifier = '2017/05/Creating-our-own-discussion-forum-with-Slack/';
var disqus_title = "Creating our own discussion forum with Slack";
var disqus_url = 'http://coderuse.com/2017/05/Creating-our-own-discussion-forum-with-Slack/';
(function() {
   var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
   dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
   (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">Blog comments powered by <span class="logo-disqus">Disqus</span></a></div></article><div id="footer"><div class="container"><div class="bar"><div class="social"><a href="http://twitter.com/coderuse" target="_blank"><i class="fa fa-twitter"></i></a><a href="https://github.com/coderuse" target="_blank"><i class="fa fa-github"></i></a><a href="https://plus.google.com/+ArnabDasUIDeveloper" target="_blank"><i class="fa fa-google-plus"></i></a><a href="/atom.xml" target="_blank"><i class="fa fa-rss"></i></a></div><div class="footer">© <a href="/" rel="nofollow">CodeRuse</a> | <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0</a></div></div></div></div><script>var trackID = 'UA-70816071-1', domainID = 'coderuse.com';(function (i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r] || function(){(i[r].q=i[r].q || []).push(arguments);},i[r].l = 1 * new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.defer=1;a.src=g;m.parentNode.insertBefore(a,m)})(window, document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', trackID, domainID);ga('send', 'pageview');</script></body></html>