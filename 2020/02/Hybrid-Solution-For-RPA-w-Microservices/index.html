<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@coderuse"><meta name="twitter:title" content="Hybrid Solution For RPA With Microservices"><meta name="twitter:description" content="&lt;p&gt;In my &lt;a href=&quot;https://coderuse.com/2020/02/Adoption-Of-Microservices-For-RPA/&quot;&gt;previous post&lt;/a&gt;, talked about how we can optimize RPA deployments in terms of cost, performance, handling complex use cases and optimally re-use components by using microservices. There are some scenarios, where implementing microservices can be costly in terms of resource expenditure and also cost for third party services. In this post we will try to figure out flow and integration of one of such use-cases.&lt;/p&gt;"><meta name="twitter:image" content="http://i.imgur.com/9RX3TO3.png"><title>Hybrid Solution For RPA With Microservices | CodeRuse</title><link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans:300|Roboto:300|Inconsolata"><link rel="stylesheet" type="text/css" href="/css/very-simple.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="amphtml" href="./amp/index.html"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><!-- include the sidebar--><!-- include ./includes/sidebar.jade--><!-- Blog title and subtitle--><header><div class="container header"><a id="logo" href="/." class="title">CodeRuse</a><!--span.subtitle= config.subtitle--><label id="toggle-menu" for="menu" onclick><i class="fa fa-bars"></i></label></div></header><!-- use checkbox hack for toggle nav-bar on small screens--><input id="menu" type="checkbox"><!-- Navigation Links--><div id="top-nav" class="nav"><div class="container"><a href="/" class="sidebar-nav-item active">Home</a><a href="/archives" target="_blank" class="sidebar-nav-item">Archives</a><a href="http://galleries.coderuse.com" target="_blank" class="sidebar-nav-item">Galleries</a><a href="/about" target="_blank" class="sidebar-nav-item">About</a></div></div><div id="header-margin-bar"></div><!-- gallery that comes before the header--><div class="wrapper"><div class="container post-header"><h1>Hybrid Solution For RPA With Microservices</h1></div></div><div class="wrapper"><div class="container meta"><div class="post-time">Feb 29, 2020</div><div class="post-categories"><a class="post-category-link" href="/categories/MicroService/">MicroService</a>><a class="post-category-link" href="/categories/MicroService/Technical/">Technical</a></div><div class="post-tags"><a class="post-tag-link" href="/tags/microservices/">microservices</a>/<a class="post-tag-link" href="/tags/rpa/">rpa</a></div></div></div><article><div class="container post"><p>In my <a href="https://coderuse.com/2020/02/Adoption-Of-Microservices-For-RPA/">previous post</a>, talked about how we can optimize RPA deployments in terms of cost, performance, handling complex use cases and optimally re-use components by using microservices. There are some scenarios, where implementing microservices can be costly in terms of resource expenditure and also cost for third party services. In this post we will try to figure out flow and integration of one of such use-cases.</p>
<p>There are numerous questions about possibility / how-to-do / complexity for RPA with WhatsApp on <a href="https://forum.uipath.com/search?q=whatsapp" target="_blank" rel="external">UIPath forum</a>. It’s quite natural. As even for an advanced developer, it takes substantial time to integrate WhatsApp session messages from providers like <a href="https://www.twilio.com/whatsapp" target="_blank" rel="external">Twilio</a>, moreover it’s pricing also a <a href="https://www.twilio.com/whatsapp/pricing/us" target="_blank" rel="external">bit high</a> for something that we are used to use as free.</p>
<p>Now, doing the scraping for new messages and sending messages via <a href="https://web.whatsapp.com/" target="_blank" rel="external">WhatsApp</a> with UIPath or Blue Prism may not be a piece-of-cake but definitely is doable. For the services like, WhatsApp where APIs are kind of closed or expensive, or only desktop app is available, hybrid solution with UIPath / Blue Prism along with Microservices can be quick and easy to build, deploy and maintain.</p>
<p>Suppose we want to build one food ordering system for a food delivery startup like Zomato / Swiggy etc. Whenever customer would ping to a specific number on WhatsApp, our solution should be able to respond with greetings, ask for preference and present options from different restaurants with their price via WhatsApp messages.</p>
<p>Here we are following micro-bots design pattern to build the solution. We need </p>
<ul>
<li>Two micro-bots to be deployed as un-attended bots<ul>
<li>Get messages bot</li>
<li>Send messages bot</li>
</ul>
</li>
</ul>
<p>To process the incoming messages, we can either use <a href="https://flink.apache.org/" target="_blank" rel="external">Apache Flink</a> or <a href="https://storm.apache.org/" target="_blank" rel="external">Apache Storm</a> for CEP or create small micro applications to interpret and prepare response for each of the messages. We will create a very simple microservice as deployment and maintenance of both Flink and Storm are complex and our solution does not have that much complex use-cases to handle.</p>
<p>This message processor application has to respond immediately, otherwise user may loose interest. Also to interpret user’s preference / choices we have to use <a href="https://en.wikipedia.org/wiki/Natural_language_processing" target="_blank" rel="external">NLP</a>. We would use <a href="https://docs.microsoft.com/en-us/azure/cognitive-services/text-analytics/" target="_blank" rel="external">Azure Text Analytics Service</a> for this. For a short discussion around why Azure vs Google Cloud or AWS, please refer to our <a href="https://coderuse.com/2020/02/Adoption-Of-Microservices-For-RPA/">previous post</a>. This application should process the incoming messages quickly and swiftly.</p>
<p><code>Get Messages Bot</code> should scrape the new messages and put into a Message Bus. We will use <a href="https://www.rabbitmq.com/" target="_blank" rel="external">RabbitMQ</a>. It’s fast and can work with a very high throughput with <a href="https://content.pivotal.io/blog/rabbitmq-hits-one-million-messages-per-second-on-google-compute-engine" target="_blank" rel="external">relatively less resources</a>. Other choice for an enterprise service bus may be <a href="https://solace.com/products/event-broker/" target="_blank" rel="external">Solace PubSub+</a>. But configuration wise it’s a bit complex and needs more resources than RabbitMQ. And Solace’s Standard version has a limitation for concurrent connections and messages per second.</p>
<p>Adhering to Single Responsibility Principle of <a href="https://itnext.io/solid-principles-explanation-and-examples-715b975dcad4" target="_blank" rel="external">SOLID</a>, we are breaking the message processor application into three different applications. Each of them would interact with each other via the enterprise bus, that we have configured with RabbitMQ. And also to facilitate the processing of the messages and their followups, we would use a <a href="https://rclayton.silvrback.com/use-state-machines" target="_blank" rel="external">State Machine</a>. To understand this, we should first understand, why it’s required. Suppose a user first IMs that, s/he would like to have some dishes from <a href="https://en.wikipedia.org/wiki/Indian_cuisine" target="_blank" rel="external">Indian Cuisines</a>. Immediately after that, before getting any responses s/he again expresses her/his interest in <a href="https://en.wikipedia.org/wiki/Mughlai_cuisine" target="_blank" rel="external">Mughlai</a> dishes. So, after this responding with a general recommnedation of Indian dishes won’t look good. We should restrict our search only among the Mughlai dishes. For that we should use a Finite State Machine for this kind of scenario. Though <a href="https://barrgroup.com/embedded-systems/how-to/state-machines-event-driven-systems" target="_blank" rel="external">this post</a> does not match our solution domain, but explains the concept in a very straighforward way.</p>
<p>We would need four microservices along with two bots.</p>
<ul>
<li><strong>Incoming Message Processor</strong> this would take up the messages one-after-another from the Enterprise Service Bus (ESB), pushed by the <code>Get messages bot</code>, call the NLP service to get the classification words and then it would put the message along with the reponse from the NLP into the ESB.</li>
<li><strong>Cuisine Search App</strong> this would take up the messages from the previous one and search accordingly and put the search result into ESB along with the message and the classification words.</li>
<li><strong>Response Preparation Processor</strong> this would prepare the response out of the search results from the <code>Cuisine Search App</code> and put into the ESB to be taken by the <code>Send messages bot</code>.</li>
<li><strong>State Machine</strong> effectively this would process each of the new messages put by the <code>Get messages bot</code> and manages the state. And all the above three apps and the <code>Send message bot</code> always should regard the status of a specific message processing of each of the messages. In this way, we can prevent sending unrelated results to a customer.</li>
</ul>
<p>Now let’s review the flow and interation among the RPA bots along with the micro-services from the following picture.</p>
<p><img src="https://i.imgur.com/8awZd9q.jpg" alt="Hybrid Solution For RPA With Microservices"></p>
<p>With this hybrid solution, we have used best of both worlds. Made our life easy and solution a bit cheaper with the use of RPA bots to scrape new messages from WhatsApp web and send messages. Used microservices to accelerate the processing of the messages and finally preparation of the response using AI. By using the AI NLP, taken account of the customer emotion and changing preferences.</p>
</div><!-- comment system--><div class="container"><div id="disqus_thread"></div><script type="text/javascript">
var disqus_shortname = 'coderuse';
var disqus_identifier = '2020/02/Hybrid-Solution-For-RPA-w-Microservices/';
var disqus_title = "Hybrid Solution For RPA With Microservices";
var disqus_url = 'http://coderuse.com/2020/02/Hybrid-Solution-For-RPA-w-Microservices/';
(function() {
   var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
   dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
   (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">Blog comments powered by <span class="logo-disqus">Disqus</span></a></div></article><div id="footer"><div class="container"><div class="bar"><div class="social"><a href="http://twitter.com/coderuse" target="_blank"><i class="fa fa-twitter"></i></a><a href="https://github.com/coderuse" target="_blank"><i class="fa fa-github"></i></a><a href="https://plus.google.com/+ArnabDasUIDeveloper" target="_blank"><i class="fa fa-google-plus"></i></a><a href="/atom.xml" target="_blank"><i class="fa fa-rss"></i></a></div><div class="footer">© <a href="/" rel="nofollow">CodeRuse</a> | <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0</a></div></div></div></div><script>var trackID = 'UA-70816071-1', domainID = 'coderuse.com';(function (i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r] || function(){(i[r].q=i[r].q || []).push(arguments);},i[r].l = 1 * new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.defer=1;a.src=g;m.parentNode.insertBefore(a,m)})(window, document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', trackID, domainID);ga('send', 'pageview');</script></body></html>